; =============================================================================
; ConnectorX - Custom Firmware Starter
; =============================================================================
;
; This template project allows you to create custom firmware for ConnectorX
; boards. Link against the Lumyn Labs SDK to access all hardware features
; while implementing your own sensors, actuators, and logic.
;
; Getting Started:
;   1. Copy the SDK files to lib/LumynLabsSDK/
;   2. Implement your modules in src/main.cpp
;   3. Build and flash: pio run -t upload
;
; =============================================================================

[env:cx]
platform = https://github.com/maxgerhardt/platform-raspberrypi.git
board = cx
framework = arduino
board_build.core = earlephilhower
board_build.mcu = rp2040
board_build.f_cpu = 133000000L
board_build.filesystem_size = 0.2m

build_flags = 
    -std=gnu++23
    -DUSE_TINYUSB
    -DCFG_TUSB_RHPORT0_MODE=OPT_MODE_DEVICE
    ; FreeRTOS configuration
    -DPIO_FRAMEWORK_ARDUINO_ENABLE_FREERTOS
    -D CX_FREERTOS_ENABLED=1
    -D configUSE_CORE_AFFINITY=1
    -D configRUN_MULTIPLE_PRIORITIES=1

build_unflags = -std=gnu++17

; Deep library dependency finder - SDK's library.json declares all dependencies
lib_ldf_mode = deep+

; The LumynLabsSDK in lib/ declares all its dependencies in library.json
; No need to list them here - PlatformIO will resolve them automatically

lib_archive = yes

; Upload settings
upload_port = F:\
debug_tool = cmsis-dap